<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf8"/>
    <meta name="viewport" content="initial-scale=1.0, width=device-width"/>
    <title>
      
        Spring框架 | 芋圆明天不困
      
    </title>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    
      <link rel="apple-touch-icon"
            sizes="180x180"
            href="/images/apple-touch-icon.png"/>
    
    
      <link rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/favicon-32x32.png"/>
    
    
      <link rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/favicon-16x16.png"/>
    
    
      <link rel="mask-icon"
            href="/images/logo.svg"
            color=""/>
    
    
    
      
  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/regular.ttf);
        font-weight: regular;
    }
  </style>

  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/bold.ttf);
        font-weight: bold;
    }
  </style>


    
    <link rel="stylesheet"
          type="text/css"
          href='/css/layout.css'/>
    
    
  <link rel="stylesheet" type="text/css" href="/css/post.css" />
  

  <meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <div class="head">
      <div class="nav">
        <a href='/' class="nav-logo">
          <img alt="logo" height="60px" width="60px" src="/images/logo.svg"/>
        </a>
        <input id="navBtn" type="checkbox"/>
        <div class="nav-menu">
          
            
              <a class="nav-menu-item" href="/CS">技术</a>
            
              <a class="nav-menu-item" href="/Others">杂七杂八</a>
            
          
          
        </div>
        <label class="nav-btn" for="navBtn"></label>
      </div>
    </div>
    <div class="body">
      
  <article class="post-content">
    <div class="post-inner">
      <div class="post-content__head">
        <div class="post-title">Spring框架</div>
        <div class="post-info">
          
  <a href="/tags/Java/" class="post-tag">#Java</a><a href="/tags/%E5%BC%80%E5%8F%91/" class="post-tag">#开发</a><a href="/tags/SSM/" class="post-tag">#SSM</a>


          <span class="post-date">2024-01-20</span>
        </div>
      </div>
      
      <div class="post-content__body">
        
          <div class="post-gallery">
            
          </div>
        
        <p><img src="https://dzc2000919.oss-cn-shanghai.aliyuncs.com/zyx_images/202401201814430.png"></p>
<p><img src="https://dzc2000919.oss-cn-shanghai.aliyuncs.com/zyx_images/202401201814506.png"></p>
<p>Springboot是将ssm整合的一个框架。</p>
<p>框架 &#x3D; jar包（有功能）+配置文件（定制化）<br><img src="https://dzc2000919.oss-cn-shanghai.aliyuncs.com/zyx_images/202401201818757.png" width="50%" height="50%"></p>
<ul>
<li><p><strong>Spring</strong><br>广义的 Spring：Spring 技术栈（全家桶）。<br>广义上的 Spring 泛指<strong>以 Spring Framework 为基础的 Spring 技术栈。</strong></p>
</li>
<li><p>SpringFramework</p>
<img src="https://dzc2000919.oss-cn-shanghai.aliyuncs.com/zyx_images/202401201823569.png" width="50%" height="50%"></li>
</ul>
<table>
<thead>
<tr>
<th>功能模块</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Core Container</strong></td>
<td>核心容器，在 Spring 环境下使用任何功能都必须基于IOC容器。</td>
</tr>
<tr>
<td>AOP&amp;Aspects</td>
<td>面向切面编程</td>
</tr>
<tr>
<td>TX</td>
<td>声明式事务管理</td>
</tr>
<tr>
<td>Spring MVC</td>
<td>提供了面向Web应用程序的集成功能</td>
</tr>
</tbody></table>
<ul>
<li>SpringFramework优势</li>
</ul>
<ol>
<li><strong>丰富的生态系统</strong>：支持许多模块和库，如 Spring Boot、Spring Security、Spring Cloud 等等，可以帮助开发人员快速构建高可靠性的企业应用程序。</li>
<li><strong>模块化的设计</strong>：框架组件之间的松散耦合和模块化设计使得 Spring Framework 具有良好的可重用性、可扩展性和可维护性。</li>
<li><strong>简化 Java 开发</strong>：Spring Framework 简化了 Java 开发，提供了各种工具和 API，可以降低开发复杂度和学习成本。同时，Spring Framework 支持各种应用场景，包括 Web 应用程序、RESTful API、消息传递、批处理等等。</li>
</ol>
<h1 id="SpringIOC容器和核心概念"><a href="#SpringIOC容器和核心概念" class="headerlink" title="SpringIOC容器和核心概念"></a>SpringIOC容器和核心概念</h1><ul>
<li>组件是可以<strong>复用</strong>的java<strong>对象</strong></li>
<li>组件可以完全交给Spring 框架进行管理，Spring框架替代了程序员原有的new对象和对象属性赋值动作等！</li>
</ul>
<p>交给Spring框架的优势：<br>降低了组件之间的耦合性，Spring IoC容器通过依赖注入机制，将组件之间的依赖关系削弱；提高了代码的可重用性和可维护性；方便了配置和管理；交给Spring管理的对象（组件），方<strong>可享受Spring框架的其他功能（AOP,声明事务管理TX）</strong>等</p>
<ul>
<li>SpringIOC容器<br>普通容器：只能存储数据（数组，list，set）<br>复杂容器：存储和管理数据（创建对象，调用方法）</li>
</ul>
<p>总结：<strong>Spring管理组件的容器，就是一个复杂容器，不仅存储组件，也可以管理组件之间依赖关系，并且创建和销毁组件等。</strong></p>
<p>配置元数据以 <strong>XML、Java 注解或 Java 代码形式表现</strong>。它允许表达组成应用程序的组件以及这些组件之间丰富的相互依赖关系。</p>
<ul>
<li>SpringIOC的接口和实现类</li>
</ul>
<p>BeanFactory接口是SpringIOC容器的标准化超接口；<br><code>ApplicationContext</code> 是 <code>BeanFactory</code> 的子接口。它扩展了以下功能：</p>
<ul>
<li>更容易与 Spring 的 AOP 功能集成</li>
<li>消息资源处理（用于国际化）</li>
<li>特定于应用程序给予此接口实现，例如Web 应用程序的 <code>WebApplicationContext</code></li>
</ul>
<p>BeanFactory 提供了配置框架和基本功能；ApplicationContext 添加了更多特定于企业的功能</p>
<table>
<thead>
<tr>
<th>类型名</th>
<th>简介</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ClassPathXmlApplicationContext</strong></td>
<td>通过读取类路径下的 XML 格式的配置文件创建 IOC 容器对象</td>
</tr>
<tr>
<td>FileSystemXmlApplicationContext</td>
<td>通过文件系统路径读取 XML 格式的配置文件创建 IOC 容器对象</td>
</tr>
<tr>
<td>AnnotationConfigApplicationContext</td>
<td>通过读取Java配置类创建 IOC 容器对象</td>
</tr>
<tr>
<td>WebApplicationContext</td>
<td>专门为 Web 应用准备，基于 Web 环境创建 IOC 容器对象，并将对象引入存入 ServletContext 域中。</td>
</tr>
</tbody></table>
<p><img src="https://dzc2000919.oss-cn-shanghai.aliyuncs.com/zyx_images/202401202014826.png"></p>
<p>SpringIOC容器管理配置方式：XML配置方式（最早）、<strong>注解方式和Java配置类方式（常用）</strong></p>
<p>总结：</p>
<ul>
<li><p><strong>IoC容器</strong><br>Spring IoC 容器，负责实例化、配置和组装 bean（组件）核心容器。容器通过读取配置元数据来获取有关要实例化、配置和组装组件的指令。</p>
</li>
<li><p><strong>IoC（Inversion of Control）控制反转</strong><br>IoC 主要是针对对象的创建和调用控制而言的，也就是说，当应用程序需要使用一个对象时，不再是应用程序直接创建该对象，而是由 IoC 容器来创建和管理，即<strong>控制权由应用程序转移到 IoC 容器</strong>中，也就是“反转”了控制权。这种方式基本上是通过<strong>依赖查找</strong>的方式来实现的，即 IoC 容器维护着构成应用程序的对象，并负责创建这些对象。</p>
</li>
<li><p><strong>DI (Dependency Injection) 依赖注入</strong><br>DI 是指在组件之间传递依赖关系的过程中，<strong>将依赖关系在容器内部进行处理</strong>，这样就不必在应用程序代码中硬编码对象之间的依赖关系，实现了对象之间的解耦合。在 Spring 中，DI 是通过<strong>XML 配置文件或注解的方式</strong>实现的。它提供了三种形式的依赖注入：<strong>构造函数注入、Setter 方法注入和接口注入</strong>。</p>
</li>
</ul>
<h1 id="SpringIOC的实践与应用"><a href="#SpringIOC的实践与应用" class="headerlink" title="SpringIOC的实践与应用"></a>SpringIOC的实践与应用</h1><p>步骤：</p>
<ol>
<li>编写配置信息，配置文件(xml,注解，配置)，组件类信息和组件之间的引用关系<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;...&quot; [1] class=&quot;...&quot; [2]&gt;  </span><br><span class="line">    &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">  &lt;/bean&gt;</span><br></pre></td></tr></table></figure></li>
<li>实例化IOC容器对象(ApplicationContext 构造函数)</li>
<li>在Java代码中获取组件（getBean）</li>
</ol>
<h2 id="1-基于XML配置方式Bean（组件）管理"><a href="#1-基于XML配置方式Bean（组件）管理" class="headerlink" title="1.基于XML配置方式Bean（组件）管理"></a>1.基于XML配置方式Bean（组件）管理</h2><p>定义xml文件，声明组件类信息，给Spring的IOC容器管理</p>
<center><img src="https://dzc2000919.oss-cn-shanghai.aliyuncs.com/zyx_images/202401211956124.png" width="50%" height="50%"></center>

<h3 id="实验一：Bean信息声明配置IOC"><a href="#实验一：Bean信息声明配置IOC" class="headerlink" title="实验一：Bean信息声明配置IOC"></a>实验一：Bean信息声明配置IOC</h3><p>实例化对象：</p>
<ul>
<li><strong>构造函数实例化（无参构造函数，有参构造函数9（DI））</strong></li>
<li><strong>工厂模式实例化（静态工厂，非静态工厂）</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line">&lt;!--    1.无参构造函数实例化组件</span><br><span class="line">bean一个组件信息，id组件标识，class组件的类的全限定符</span><br><span class="line">一个组件类-声名2个组件信息-默认单例模式-实例化2个组件对象</span><br><span class="line">--&gt;</span><br><span class="line">    &lt;bean id=&quot;happyComponent&quot; class=&quot;com.carrie.ioc01.HappyComponent&quot;/&gt;</span><br><span class="line">&lt;!--    2.静态工厂类 声明工厂方法</span><br><span class="line">factory-method 静态工厂方法（必须静态方法）</span><br><span class="line">--&gt;</span><br><span class="line">    &lt;bean id=&quot;clientService&quot; class=&quot;com.carrie.ioc01.ClientService&quot; factory-method=&quot;createInstance&quot;/&gt;</span><br><span class="line">&lt;!--    3.非静态工厂，实例工厂</span><br><span class="line">配置工厂类的组件信息;</span><br><span class="line">指定非静态工厂对象(组件)和方法名(必须非静态)，配置生成的ioc信息</span><br><span class="line">--&gt;</span><br><span class="line">    &lt;bean id=&quot;defaultServiceLocator&quot; class=&quot;com.carrie.ioc01.DefaultServiceLocator&quot;/&gt;</span><br><span class="line">    &lt;bean id=&quot;clientService2&quot; factory-bean=&quot;defaultServiceLocator&quot; factory-method=&quot;createClientServiceInstance&quot;/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h3 id="实验二：Bean依赖注入配置（DI）"><a href="#实验二：Bean依赖注入配置（DI）" class="headerlink" title="实验二：Bean依赖注入配置（DI）"></a>实验二：Bean依赖注入配置（DI）</h3><p>实现IOC容器中Bean之间的引用（依赖注入配置）</p>
<ul>
<li><strong>基于构造函数的依赖注入（单个构造参数，多个参数的构造函数）</strong></li>
<li><strong>基于Setter的依赖注入</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line">&lt;!--引用和被引用的组件，必须都在ioc容器--&gt;</span><br><span class="line">&lt;!--    1.单个构造参数注入--&gt;</span><br><span class="line">&lt;!--    写的顺序没有影响，高级容器，先创建所有的对象，再进行属性赋值--&gt;</span><br><span class="line">    &lt;bean id=&quot;userDao&quot; class=&quot;com.carrie.ioc02.UserDao&quot;/&gt;</span><br><span class="line">    &lt;bean id=&quot;userService&quot; class=&quot;com.carrie.ioc02.UserService&quot;&gt;</span><br><span class="line">&lt;!--        需要传入构造参数</span><br><span class="line">constructor-arg:构造参数传值，value直接属性值（int，String），ref引用其他的bean（id值）</span><br><span class="line">--&gt;</span><br><span class="line">        &lt;constructor-arg  ref=&quot;userDao&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;!--    2.多个构造参数--&gt;</span><br><span class="line">    &lt;bean id=&quot;userService1&quot; class=&quot;com.carrie.ioc02.UserService&quot;&gt;</span><br><span class="line">&lt;!--        构造参数的顺序--&gt;</span><br><span class="line">        &lt;constructor-arg value=&quot;18&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg value=&quot;zyx&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg ref=&quot;userDao&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;!--构造参数的名称写（推荐！！！！）--&gt;</span><br><span class="line">    &lt;bean id=&quot;userService2&quot; class=&quot;com.carrie.ioc02.UserService&quot;&gt;</span><br><span class="line">        &lt;constructor-arg name=&quot;age&quot; value=&quot;18&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg name=&quot;name&quot; value=&quot;zyx&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg name=&quot;userDao&quot; ref=&quot;userDao&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;!--   构造参数的下标，index --&gt;</span><br><span class="line">    &lt;bean id=&quot;userService&quot; class=&quot;com.carrie.ioc02.UserService&quot;&gt;</span><br><span class="line">        &lt;constructor-arg index=&quot;0&quot; value=&quot;18&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg index=&quot;1&quot; value=&quot;zyx&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg index=&quot;2&quot; ref=&quot;userDao&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--    3.触发setter方法注入--&gt;</span><br><span class="line">    &lt;bean id=&quot;movieFineder&quot; class=&quot;com.carrie.ioc02.MovieFinder&quot;/&gt;</span><br><span class="line">    &lt;bean id=&quot;simpleMovieLister&quot; class=&quot;com.carrie.ioc02.SimpleMovieLister&quot;&gt;</span><br><span class="line">&lt;!--       setter方法去掉set首字母小写的值(本质找的是方法名！！！)</span><br><span class="line">value/ref 二选一</span><br><span class="line">--&gt;</span><br><span class="line">        &lt;property name=&quot;movieName&quot;  value=&quot;下雪了&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;movieFinder&quot; ref=&quot;movieFineder&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h3 id="实验三：IOC容器的创建和使用"><a href="#实验三：IOC容器的创建和使用" class="headerlink" title="实验三：IOC容器的创建和使用"></a>实验三：IOC容器的创建和使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package com.carrie.test;</span><br><span class="line"></span><br><span class="line">import com.carrie.ioc03.HappyComponent;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.springframework.context.ApplicationContext;</span><br><span class="line">import org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class SpringIoCTEst &#123;</span><br><span class="line">//    创建IoC容器</span><br><span class="line">    public void createIoC()&#123;</span><br><span class="line">        /*</span><br><span class="line">        接口：BeanFactory；ApplicationContext，扩展的接口</span><br><span class="line">        实现类：</span><br><span class="line">         */</span><br><span class="line">        //法1.直接创建文件</span><br><span class="line">        ApplicationContext applicationContext=new ClassPathXmlApplicationContext(&quot;spring-03.xml&quot;);</span><br><span class="line">        //法2.先创建ioc容器，在指定配置文件(外部配置)</span><br><span class="line">        //源码的配置过程</span><br><span class="line">        ClassPathXmlApplicationContext applicationContext1=new ClassPathXmlApplicationContext();</span><br><span class="line">        applicationContext1.setConfigLocations(&quot;spring-03.xml&quot;);</span><br><span class="line">        applicationContext1.refresh();//刷新才有效</span><br><span class="line">    &#125;</span><br><span class="line">/*</span><br><span class="line">从IoC容器中获取组件</span><br><span class="line"> */@Test</span><br><span class="line">//方法前加@Test，可以测试</span><br><span class="line">    public void getBeanFromIoC()&#123;</span><br><span class="line">        //创建ioc容器</span><br><span class="line">        ClassPathXmlApplicationContext applicationContext=new ClassPathXmlApplicationContext();</span><br><span class="line">        applicationContext.setConfigLocations(&quot;spring-03.xml&quot;);</span><br><span class="line">        applicationContext.refresh();</span><br><span class="line">        //1.beanID,返回类型是Object，需要强转</span><br><span class="line">        HappyComponent happyComponent = (HappyComponent) applicationContext.getBean(&quot;happyComponent&quot;);</span><br><span class="line">        //2.beanID，指定Bean的类型</span><br><span class="line">        HappyComponent happyComponent1 = applicationContext.getBean(&quot;happyComponent&quot;, HappyComponent.class);</span><br><span class="line">        //3.根据类型获取</span><br><span class="line">        //TODO：只能有一个同类型的bean，多个会出现异常</span><br><span class="line">        //TODO：ioc配置一定是实现类，但可以根据接口类型赋值 instanceOf ioc容器的类型==true</span><br><span class="line">        HappyComponent happyComponent2 = applicationContext.getBean(HappyComponent.class);</span><br><span class="line">        /*</span><br><span class="line">        (HappyComponent implement A)</span><br><span class="line">        A happyComponent2 = applicationContext.getBean(A.class);</span><br><span class="line">        happyComponent2.dowork();</span><br><span class="line">         */</span><br><span class="line">    System.out.println(happyComponent==happyComponent1);</span><br><span class="line">    System.out.println(happyComponent2==happyComponent1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验四：高级特性：bean的作用域和周期方法配置"><a href="#实验四：高级特性：bean的作用域和周期方法配置" class="headerlink" title="实验四：高级特性：bean的作用域和周期方法配置"></a>实验四：高级特性：bean的作用域和周期方法配置</h3><ul>
<li>周期方法<br>周期方法：到对应时间才<strong>主动调用</strong>，只能等待和编写对应的逻辑<br>在组件类中定义方法，然后当IoC容器<strong>实例化</strong>和<strong>销毁组件对象</strong>的时候进行调用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class JavaBean &#123;</span><br><span class="line">    /*</span><br><span class="line">    必须是public，void，无参数;</span><br><span class="line">    命名随意</span><br><span class="line">     */</span><br><span class="line">    //初始化</span><br><span class="line">    public void init()&#123;</span><br><span class="line">        System.out.println(&quot;JavaBean.init&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    //销毁</span><br><span class="line">    public  void clear()&#123;</span><br><span class="line">        System.out.println(&quot;destroy&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> /*</span><br><span class="line">    测试ioc容器的初始化和destroy</span><br><span class="line">     */</span><br><span class="line">    @Test</span><br><span class="line">    public void test_04()&#123;</span><br><span class="line">     ClassPathXmlApplicationContext applicationContext=new ClassPathXmlApplicationContext(&quot;spring-04.xml&quot;);</span><br><span class="line">     //ioc容器调用destroy</span><br><span class="line">        // 正常结束ioc容器</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<ul>
<li>作用域<br>准备好组件类，配置文件，到ioc容器（java文件），需要将配置文件转化为BeanDefinition类，再反射实例化得到组件对象，检查BeanDefinition中的scope【单例（默认）或多例】<br>单例（singleton），外部多次调用都是一个对象；多例（prototype），调用一次就是一个新的对象</li>
</ul>
<ol>
<li>作用域可选值<table>
<thead>
<tr>
<th>取值</th>
<th>含义</th>
<th>创建对象的时机</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>singleton</td>
<td>在 IOC 容器中，这个 bean 的对象始终为单实例</td>
<td><strong>IOC 容器初始化时</strong></td>
<td>是</td>
</tr>
<tr>
<td>prototype</td>
<td>这个 bean 在 IOC 容器中有多个实例</td>
<td><strong>获取 bean 时（getBean）</strong></td>
<td>否</td>
</tr>
</tbody></table>
</li>
</ol>
<p>如果是在WebApplicationContext环境下还会有另外两个作用域（但不常用）：</p>
<table>
<thead>
<tr>
<th>取值</th>
<th>含义</th>
<th>创建对象的时机</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>request</td>
<td>请求范围内有效的实例</td>
<td>每次请求</td>
<td>否</td>
</tr>
<tr>
<td>session</td>
<td>会话范围内有效的实例</td>
<td>每次会话</td>
<td>否</td>
</tr>
</tbody></table>
<h3 id="实验五：高级特性：FactoryBean的特性和使用"><a href="#实验五：高级特性：FactoryBean的特性和使用" class="headerlink" title="实验五：高级特性：FactoryBean的特性和使用"></a>实验五：高级特性：FactoryBean的特性和使用</h3><p>FactoryBean：标准化工厂<br>重写getObject（）：编写实例化逻辑（配置文件中，不用写factory-method，只需要配置工厂类即可）</p>
<p><strong>用于配置复杂的Bean对象，创建过程存储在FactoryBean的getObject方法</strong></p>
<p><code>FactoryBean&lt;T&gt;</code> 接口提供三种方法：</p>
<ul>
<li><code>T getObject()</code>:<br>  返回此工厂创建的对象的实例。该返回值会被存储到IoC容器！</li>
<li><code>boolean isSingleton()</code>:<br>  如果此 <code>FactoryBean</code> 返回单例，则返回 <code>true</code> ，否则返回 <code>false</code> 。此方法的默认实现返回 <code>true</code> （注意，lombok插件使用，可能影响效果）。</li>
<li><code>Class&lt;?&gt; getObjectType()</code>: 返回 <code>getObject()</code> 方法返回的对象类型，如果事先不知道类型，则返回 <code>null</code> 。</li>
</ul>
<ol>
<li>FactoryBean使用场景<ol>
<li>代理类的创建</li>
<li>第三方框架整合</li>
<li>复杂对象实例化等</li>
</ol>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ClassPathXmlApplicationContext applicationContext=new ClassPathXmlApplicationContext(&quot;spring-05.xml&quot;);</span><br><span class="line">        JavaBean javaBean = applicationContext.getBean(&quot;javaBean&quot;, JavaBean.class);</span><br><span class="line">        //TODO:FactoryBean也在IoC容器，标识符为 &amp;id</span><br><span class="line">        Object javaBean2 = applicationContext.getBean(&quot;&amp;javaBean&quot;);</span><br></pre></td></tr></table></figure>

<ol>
<li>FactoryBean和BeanFactory区别</li>
</ol>
<ul>
<li><strong>FactoryBean</strong><br>Spring 中一种<strong>特殊的 bean</strong>，可以在<strong>getObject() 工厂方法自定义的逻辑创建Bean</strong>。是一种能够生产其他 Bean 的 Bean。FactoryBean 在容器启动时被创建，而在实际使用时则是通过<strong>调用 getObject() 方法来得到其所生产的 Bean</strong>。FactoryBean 可以自定义任何所需的初始化逻辑，生产出一些定制化的 bean。<br>一般情况下，<strong>整合第三方框架</strong>，都是通过定义FactoryBean实现！！！</li>
<li><strong>BeanFactory</strong><br><strong>Spring 框架的基础</strong>，其作为一个<strong>定义了容器基本行为的顶级接口</strong>，例如管理 bean 的生命周期、配置文件的加载和解析、bean 的装配和依赖注入等。BeanFactory 接口提供了访问 bean 的方式，例如 getBean() 方法获取指定的 bean 实例。它可以从不同的来源（例如 Mysql 数据库、XML 文件、Java 配置类等）获取 bean 定义，并将其转换为 bean 实例。同时，BeanFactory 还包含很多子类（例如，ApplicationContext 接口）提供了额外的强大功能。</li>
</ul>
<p>总的来说，FactoryBean 和 BeanFactory 的区别主要在于前者是用于<strong>创建 bean 的接口</strong>，它提供了更加灵活的初始化定制功能，而后者是用于<strong>管理 bean 的框架基础接口</strong>，提供了基本的<strong>容器功能和 bean 生命周期管理</strong>。</p>
<h3 id="实验六：基于XML方式整合三层架构组件"><a href="#实验六：基于XML方式整合三层架构组件" class="headerlink" title="实验六：基于XML方式整合三层架构组件"></a>实验六：基于XML方式整合三层架构组件</h3><ul>
<li><strong>JdbcTemplate</strong><br>为了在特定领域帮助我们简化代码，Spring 封装了很多 『Template』形式的模板类。例如： JdbcTemplate、RedisTemplate、RestTemplate等等。</li>
</ul>

      </div>
    </div>
  </article>
  <div class="post__foot">
    
    <div class="post-nav">
  
    <div class="post-nav-item-left"></div>
  
  <div class="vhr"></div>
  
    <a class="post-nav-item-right" href="/2024/01/18/Maven/">
      <div class="text-align">
        <span class="text-small">下一篇</span>
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             transform="scale(-1,-1)"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596"/>
        </svg>
      </div>
      Maven
    </a>
  
</div>

    
      <div class="related-post">
  <div class="related__head">
  <a href="/tags/Java/" class="post-tag">#Java</a><a href="/tags/%E5%BC%80%E5%8F%91/" class="post-tag">#开发</a><a href="/tags/SSM/" class="post-tag">#SSM</a>

</div>
  <div class="realated__body">
    
      DEBUG: 请安装插件 <a target="_blank" rel="noopener" href="https://github.com/tea3/hexo-related-popular-posts">hexo-related-popular-posts</a> 或关闭 related_post 配置!
    
  </div>
</div>

    
    
  </div>

    </div>
    <div class="foot">
      <div class="foot-inner">
        <div class="foot__head">
          
            <div class="foot-line">
              
                <div class="matts">若</div>
              
                <div class="matts">无</div>
              
                <div class="matts">闲</div>
              
                <div class="matts">事</div>
              
                <div class="matts">挂</div>
              
                <div class="matts">心</div>
              
                <div class="matts">头</div>
              
            </div>
          
            <div class="foot-line">
              
                <div class="matts">便</div>
              
                <div class="matts">是</div>
              
                <div class="matts">人</div>
              
                <div class="matts">间</div>
              
                <div class="matts">好</div>
              
                <div class="matts">时</div>
              
                <div class="matts">节</div>
              
            </div>
          
        </div>
        <div class="foot__body">
          
            <div class="foot-item">
              <div class="foot-item__head">朋友</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/icon/icon-link.svg"/>
                    <a class="foot-link" target="_blank" rel="noopener" href="https://carriemint.github.io">芋圆的主页</a>
                  </div>
                
                <div class="text">
                  <img alt="link" height="20px" width="20px" src="/images/icon/icon-link+.svg"/>
                  <a class="foot-link"
                     href="mailto:863162796@qq.com?subject=%E7%94%B3%E8%AF%B7%20Hozen.site%20%E7%9A%84%E5%8F%8B%E9%93%BE%E4%BD%8D%E7%BD%AE">
                  申请友链</a>
                </div>
              </div>
            </div>
          
          
            <div class="foot-item">
              <div class="foot-item__head">账号</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-github.svg"/>
                    <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/carriemint">carriemint</a>
                  </div>
                
              </div>
            </div>
          
          <div class="foot-item">
            <div class="foot-item__head">联系</div>
            <div class="foot-item__body">
              <div class="text">
                <img alt="link" height="20px" width="20px" src="/images/icon/icon-email.svg"/>
                <a class="foot-link" href="mailto:863162796@qq.com">863162796@qq.com</a>
              </div>
            </div>
          </div>
        </div>
        <div class="copyright">
          <a href="http://example.com">芋圆明天不困</a> &nbsp;|&nbsp;由&nbsp;<a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>&nbsp;及&nbsp;
          <svg width="20" height="20" viewBox="0 0 725 725">
            <path fill-rule="evenodd" fill="rgb(221, 221, 221)" d="M145.870,236.632 L396.955,103.578 L431.292,419.44 L156.600,522.53 L145.870,236.632 Z"/>
            <path fill-rule="evenodd" fill="rgb(159, 159, 159)" d="M396.955,103.578 L564.345,234.486 L611.558,513.469 L431.292,419.44 L396.955,103.578 Z"/>
            <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M431.292,419.44 L611.558,513.469 L358.327,595.18 L156.600,522.53 L431.292,419.44 Z"/>
          </svg>
          <a target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">致远</a>&nbsp;驱动
        </div>
      </div>
    </div>
    
    
  

  </body>
</html>